@{
    ViewBag.Title = "Quản lý thông tin ứng viên";
    Layout = "~/Views/Shared/_LayoutVelzon.cshtml";
    ViewBag.ModuleName = "Quản lý Quản lý thông tin ứng viên";
    ViewBag.PageName = "Danh sách Quản lý thông tin ứng viên";
    ViewBag.ModuleCode = "QLNhanSuChinhThuc_index";

}
<style>
    .fix_p-box-action {
        padding: 16px 16px 0 0;
        
    }
</style>
@using Hinet.Model.IdentityEntities;
@using Hinet.Model.Entities;
@using Newtonsoft.Json;
@using Hinet.Service.Common;
@using Hinet.Service.QLNhanSuChinhThucService.Dto;
@model PageListResultBO<QLNhanSuChinhThucDto>
@{
    var lstData = Html.Raw(JsonConvert.SerializeObject(Model.ListItem));
}

<div class="mb-1 d-flex justify-content-end fix_p-box-action">
    <a href="#collapseDiv" aria-controls="collapsePanel" data-bs-toggle="collapse" role="button" class="btn btn-primary btn-sm btn-secondary m-1 fix_btnFind">
        <i class="ri-search-line "></i> Tìm kiếm
    </a>
    <a href="/QLNhanSuChinhThucArea/QLNhanSuChinhThuc/Import" class="btn btn-primary btn-sm  btn-secondary m-1 fix_btnImport">
        <i class="ri-upload-line "></i> Import
    </a>
    <a href="javascript:void(0)" onclick="CreateAction('/QLNhanSuChinhThucArea/QLNhanSuChinhThuc/Create')" class="btn btn-primary btn-sm btn-secondary m-1 fix_btnAdd">
        <i class="ri-add-line"></i> Thêm mới
    </a>
</div>
@Html.Partial("_SearchPartial")
<div class="row">
    <div class="col-lg-12">

        @*<input type="text" class="flatpickr-input flatpickr form-control" data-provider="flatpickr" data-date-format="d/M/Y" />*@
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">@ViewBag.Title</h4>
            </div>

            <div class="card-body" id="tbl-QLNhanSuChinhThuc">
                <div class="table-responsive">
                    <table class="hinet-table table align-middle table-nowrap mb-0">
                        <thead>
                            <tr>
                                <th class="fixed-side">#</th>
                                <th class="fixed-side">Thao tác</th>
                                <th>Họ tên</th>
                                <th>Số điện thoại</th>
                                <th>Ngày Sinh</th>
                                <th>Email</th>
                                <th>Quê quán</th>
                                <th>Địa chỉ hiện tại</th>
                                <th>Phòng ban</th>
                                <th>Vị trí</th>
                                <th>Trình độ đào tạo</th>
                                <th>Ngày vào công ty</th>
                                <th>Trạng thái</th>
                                <th>Tài liệu đính kèm</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
        var lstData = eval(@lstData);
        var moduleTableSelector="#tbl-QLNhanSuChinhThuc";
        function pagefunction(){
            var conf=[
                {
                    tdClass:"center width50 fixed-side",
                    isSort:false,
                    nameModel: "",
                    isCounter:true,
                    content: function (data) {
                        return "<input type='checkbox'/>"
                    }
                },

                   {
                       isSort:false,
                       nameModel:"",
                       tdClass:"center fixed-side",
                       content: function (data) {
                           var result = `<div class="dropdown btn-group">
                               <button data-bs-toggle="dropdown" class="btn btn-success btn-sm dropdown-toggle fix_btn-active fix_btnAction" aria-expanded="false">Thao tác
                               </button>
                               <ul class="dropdown-menu fix_hover-li">`;
                            result += "<li><a href='/QLNhanSuChinhThucArea/QLNhanSuChinhThuc/Detail/" + data.Id + "'   title = 'Chi tiết'><i class='fa fa-info-circle'> </i> Thông tin chi tiết</a> </li>";
                            result += "<li><a href='javascript:void(0)' onclick='EditAction(\"/QLNhanSuChinhThucArea/QLNhanSuChinhThuc/Edit/" + data.Id + "\")'   title = 'Chỉnh sửa'><i class='glyphicon glyphicon-edit'> </i> Sửa thông tin</a> </li>";
                            result += "<li><a href='javascript:void(0)' onclick='DeleteAction(\"/QLNhanSuChinhThucArea/QLNhanSuChinhThuc/Delete/" + data.Id + "\")'  title = 'Xóa'><i class=' glyphicon glyphicon-remove' style='color:red'> </i> Xóa</a></li>";
                            result += "</ul></div>";
                            return result;
                       }
                   },
				
				{
					isSort:true,
					nameModel:'HoTen',
					content: function (data) {
					    return data.HoTen
				    }
				},
				{
					isSort:true,
					nameModel:'Email',
					content: function (data) {
					    return data.Email
				    }
				},
				{
					isSort:true,
					nameModel:'SoDienThoai',
					content: function (data) {
					    return data.SoDienThoai
				    }
				},
				{
					isSort:true,
					nameModel:'NgaySinh',
					content: function (data) {
					    return ToDate(data.NgaySinh)
				    }
				}
            ];


            var getdatafunc = function(page,sortQuery,pageSize){
                $.ajax({
                    url: '/QLNhanSuChinhThucArea/QLNhanSuChinhThuc/getData',
                    type: 'post',
                    cache: false,
                    data:{"indexPage":page,"sortQuery":sortQuery,"pageSize":pageSize},
                    success: function (data) {
                        $(moduleTableSelector).hinetTable("data",{
                            pageSize:pageSize!=-1?pageSize:data.Count,
                            pageIndex:page,
                            pagecount: data.TotalPage,
                            recordCount: data.Count,
                            listItem: data.ListItem,
                        });
                    },
                    error: function (err) {
                        CommonJS.alert(xhr.responseText);
                    }
                });

            }

            var tblData = $("#tbl-QLNhanSuChinhThuc").hinetTable("init",{
                pageSizeList:{size:[20,50,100,-1],label:['20','50','100','Tất cả']},
                pagecount: @Model.TotalPage,
                recordCount: @Model.Count,
                getData: getdatafunc,
                listItem: lstData,
                config: conf,
                showCheckBox: false
            });

        }

        function AfterSussessActionAjaxform(){
            $(moduleTableSelector).hinetTable("reload");
        }
        function AjaxSearchSuccess(rs) {
            $(moduleTableSelector).hinetTable("data", {
                pageIndex: 1,
                pagecount: rs.TotalPage,
                recordCount: rs.Count,
                listItem: rs.ListItem,
            });
        }
        pagefunction();
</script>